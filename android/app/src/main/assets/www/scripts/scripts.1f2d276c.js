"use strict";var dliveryApp=angular.module("deliveryUiApp",["ngAnimate","ngResource","ngRoute","ngTouch","toastr","ionic","ngCookies","ngDialog","dliveryAppControllers","dliveryAppServices","dliveryAppDirectives","angular-gestures"]),dliveryAppControllers=angular.module("dliveryAppControllers",[]),dliveryAppServices=angular.module("dliveryAppServices",[]),dliveryAppDirectives=angular.module("dliveryAppDirectives",[]);dliveryApp.run(["$rootScope","$location","ngDialog","toastr",function(a,b,c,d){a.guideClose=!0,a.isRNApp="react-native"===window.__APP_ENV__,a.alert=function(a,b,c){"success"==b?d.success(a,c||"成功提示："):"info"==b?d.info(a,c||"提示："):"error"==b?d.error(a,c||"错误提示："):"warning"==b?d.warning(a,c||"警告："):d.info(a,c||"提示：")},a.backEventArray=[],a.bindBackButtonAction=function(c){"/main"==b.path()||"/login"==b.path()?a.backEventArray.length?a.$broadcast(a.backEventArray.pop()):a.enableNavigation?a.$evalAsync("enableNavigation = false"):c&&c():history.back()},a.gotoDeliverUndisp=function(){b.path("/main"),a.$broadcast("deliverFromRoot")},a.checkUpdate=function(){a.isRNApp&&window.postMessage(JSON.stringify({action:"checkUpdate"}))},a.hideNavigation=function(){a.enableNavigation=!1},a.exitLogin=function(){a.$broadcast("deliverExit")},a.openNavigation=function(){a.enableNavigation=!0},a.$on("$routeChangeStart",function(b,c){a.enableNavigation=!1,c.$$route&&(a.currPage=c.$$route.originalPath)}),window.onhashchange=function(b){"#/main"===location.hash&&a.$broadcast("closePackageDetialFunc")}}]),dliveryApp.config(["$routeProvider","$httpProvider","ngDialogProvider","hammerDefaultOptsProvider","toastrConfig",function(a,b,c,d,e){d.set({recognizers:[[Hammer.Pan,{time:250}]]}),b.interceptors.push("Interceptor"),b.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",b.defaults.timeout=6e4;var f=b.defaults.transformRequest[0];b.defaults.transformRequest[0]=function(a){if(!a||a.__zaofans!==!0)return f.call(this,a);var b=function(a){var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=b(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=b(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j};return angular.isObject(a)&&"[object File]"!==String(a)?b(a):a},c.setDefaults({template:"modalDialogId",className:"ngdialog-theme-default custom-width wp60",showClose:!0,closeByDocument:!1,closeByEscape:!1}),angular.extend(e,{autoDismiss:!0,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-bottom-center",preventDuplicates:!1,preventOpenDuplicates:!0,target:"body",timeOut:2e3}),a.when("/position/:Catalog/:OrderID",{templateUrl:"views/Position.tpl.html",controller:"PositionController",controllerAs:"positionCtrl"}).when("/login",{templateUrl:"views/login.tpl.html",controller:"LoginController",controllerAs:"loginOrdersCtrl"}).when("/changePassword",{templateUrl:"views/changePassword.tpl.html",controller:"ChangePwdController",controllerAs:"CPwdController"}).when("/main",{template:"<div></div>",controller:["$scope","$location",function(a,b){a._needLogin&&b.path("/login")}]}).otherwise({redirectTo:"/main"})}]),dliveryApp.constant("STATIC_DATA",{}),dliveryAppDirectives.directive("whenScrolled",["$log","$q","$rootScope","$location","DeliveryListService","$timeout","LocalStorageService","UserService","ngDialog",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"views/directives/DeliveryList.tpl.html",scope:{currPackageDetial:"=",lastPosition_memo:"=",showPackageDetial:"=",currPackage:"=",isSearch:"=",status:"="},link:function(f,j,k){function l(a,b){this.searchContent="",this.searchTime=0,this.isSearch=b,this.status=a,this.hasPage=!0,this.reflash=!1,this.busy=!1,this.pageIndex=1,this.pageNum=10,this.pages=0,this.list=[]}function m(){w==q?(document.getElementById("position_memo").innerHTML="待配送 查询",w=r):w==s?(document.getElementById("position_memo").innerHTML="已配送 查询",w=t):w==o?(document.getElementById("position_memo").innerHTML="抢单 查询",w=p):w==u&&(w=v),w.searchContent=x,w.show(),f.doRefresh().then(function(a){f.$evalAsync("searchTime = searchTime + 1")},function(b){a.info(b)})}if(f.config={reject_reason:["其他原因","货物损坏","任性而已"],reject_reason_no_white_space:["其他原因","货物损坏","任性而已"]},f.path=function(a,b){a.stopPropagation(),a.preventDefault(),d.path(b)},f.showPackageDetialFunc=function(a){f.lastPosition_memo=document.getElementById("position_memo").innerHTML,document.getElementById("position_memo").innerHTML="订单详情",f.currPackageDetial=a.ORDERDTLS,f.currPackage=a,f.showPackageDetial=!0,f.$root.backEventArray.push("closePackageDetialFunc")},f.$on("closePackageDetialFunc",function(a){document.getElementById("position_memo").innerHTML=f.lastPosition_memo,f.$evalAsync("showPackageDetial = false"),f.$root.backEventArray.splice(f.$root.backEventArray.length-1)}),f.isLogined=h.isLogined()){var n=function(a){f.$parent.alert(a?a.error?a.error:a:"服务器连接失败","error"),!a||405!=a.errorCode&&403!=a.errorCode||f.doRefresh()};({versions:function(){var a=navigator.userAgent;navigator.appVersion;return{trident:a.indexOf("Trident")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&-1==a.indexOf("KHTML"),mobile:!!a.match(/AppleWebKit.*Mobile.*/)||!!a.match(/AppleWebKit/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1||a.indexOf("Linux")>-1,iPhone:a.indexOf("iPhone")>-1||a.indexOf("Mac")>-1,iPad:a.indexOf("iPad")>-1,webApp:-1==a.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()});l.prototype.getStorageKey=function(){return"DeliveryList_"+this.status+(this.isSearch?"_true":"_false")},l.prototype.splice=function(a,b){for(var c=null,d=0;d<this.list.length;d++)this.list[d].ID==a.ID&&(c=this.list.splice(d,1)[0],angular.extend(c,a),b&&this.list.splice(d,0,c));g.set(this.getStorageKey(),this.list)},l.prototype.append=function(a){this.list.push(a),g.set(this.getStorageKey(),this.list)},l.prototype.clear=function(a){this.list.splice(0),this.list=[],g.set(this.getStorageKey(),this.list)},l.prototype.show=function(){f.showPackageDetial=!1,f.$evalAsync("status = '"+this.status+"'"),f.isSearch=this.isSearch,f.searchTime=this.searchTime,f.hasPage=this.hasPage,f.pages=this.pages,f.busy=this.busy,this.isSearch?f.DeliveryListSearched=this.list:"DISTRIBUTED"==this.status?f.DeliveryListDisp=this.list:"COMPLETE"==this.status?f.DeliveryListFinsh=this.list:"INITIAL"==this.status?f.DeliveryListUnDisp=this.list:"BACK"==this.status&&(f.DeliveryListException=this.list)},l.prototype.refresh=function(){return this.pageIndex=1,this.hasPage=!0,this.clear(),this.load()},l.prototype.load=function(){var a=b.defer();if(!this.hasPage)return a.reject("no more pages"),a.promise;if(this.busy)return a.reject("busy..."),a.promise;if(this.reflash)return a.reject("reflash..."),a.promise;this.busy=!0,this.reflash=!0;var c=this,d=function(b){c.busy=!1,c.pageIndex++,c.pages=b[1];var d=b[0].length;(!c.pages>0||c.pageIndex>c.pages)&&(c.hasPage=!1);for(var e=0;d>e;e++){var f=b[0][e];new Date(f.DISPDATE).getTime()!=new Date(moment().format("YYYY-MM-DD")).getTime()?(f._dispateClass="delivery_tomorrow",f._dispateText="明天"):(f._dispateClass="delivery_today",f._dispateText="今天"),"BACK"==f.DISPSTATUS?(f._dispateClass="delivery_cancelling",f._dispateText=""):"CANCELLED"==f.ORDERSTATUS?(f._dispateClass="delivery_tomorrow",f._dispateText="取消"):"CANCELLING"==f.ORDERSTATUS&&(f._dispateClass="delivery_cancelling",f._dispateText="取消中"),c.list.push(f)}g.set(c.getStorageKey(),c.list),c.show(),c.reflash=!1,c=null,a.resolve("ok")};return"INITIAL"==this.status?this.isSearch?e.searchInitialList({content:this.searchContent,pageIndex:this.pageIndex,pageNum:this.pageNum}).success(d).error(n):e.getInitialList({pageIndex:this.pageIndex,pageNum:this.pageNum}).success(d).error(n):this.isSearch?e.searchDeliveryList({content:this.searchContent,status:this.status,pageIndex:this.pageIndex,pageNum:this.pageNum}).success(d).error(n):e.getDeliveryList({status:this.status,pageIndex:this.pageIndex,pageNum:this.pageNum}).success(d).error(n),a.promise};var o=new l("INITIAL",!1),p=new l("INITIAL",!0),q=new l("DISTRIBUTED",!1),r=new l("DISTRIBUTED",!0),s=new l("COMPLETE",!1),t=new l("COMPLETE",!0),u=new l("BACK",!1),v=new l("BACK",!0),w=q;w.show(),f.loadMore=function(){a.info("loadMore...."),w.load().then(function(a){w.show(),f.$broadcast("scroll.infiniteScrollComplete")},function(a){f.$broadcast("scroll.infiniteScrollComplete")})},f.doRefresh=function(){var a=w.refresh();return a.then(function(a){f.$broadcast("scroll.refreshComplete")},function(a){f.$broadcast("scroll.refreshComplete")}),a},f.$on("refresh",f.doRefresh),f.$on("deliver",function(){document.getElementById("position_memo").innerHTML="未配送",w=q,w.refresh(),w.show()}),f.$on("deliverFinsh",function(){document.getElementById("position_memo").innerHTML="已配送",w=s,w.refresh(),w.show()}),f.$on("deliverUndisp",function(){document.getElementById("position_memo").innerHTML="抢单",w=o,w.refresh(),w.show()}),f.$on("deliverException",function(){document.getElementById("position_memo").innerHTML="已取消",w=u,w.refresh(),w.show()}),f.$on("deliverExit",function(){i.openConfirm({data:{msg:"确认退出？"}}).then(function(){h.logout()})});var x="";f.$on("scan",function(a){"undefined"!=typeof Zaofans_BarcodeScanner?Zaofans_BarcodeScanner.execute("scan",[],function(a){var b=a.text;document.getElementById("searchContent").value=b,x=b,m()},function(a){f.$parent.alert(a.toString(),"info")}):c.isRNApp?window.postMessage(JSON.stringify({action:"qrscan"})):f.$parent.alert("请到APP中使用此功能","warning")}),c.isRNApp&&document.addEventListener("message",function(a){var b=JSON.parse(a.data);if("qrcodeReceive"===b.action){var c=b.payload;document.getElementById("searchContent").value=c,x=c,m()}}),f.$on("search",function(a,b){b&&(x=b,m())}),f.baiduMapButton=function(a){a.stopPropagation()},f.ideatify=function(a,b,c){i.openConfirm({data:{msg:"确认完成取餐？"}}).then(function(){f.target=a.target||a.srcElement,e.identifyservice({orderId:c,identityId:b,type:1}).success(function(a){f.target.parentElement.parentElement.style.display="none",f.$parent.alert("配送完成","success"),q.splice(a),r.splice(a),q.refresh()}).error(n)}),a.stopPropagation()},f.claimGoods=function(a,b,c,d){i.openConfirm({data:{msg:"确认取货?"}}).then(function(){e.claimGoods({orderID:c,__zaofans:!0}).success(function(a){q.splice(a,!0),r.splice(a,!0)}).error(n)}),a.stopPropagation()},f.exception_delay=function(a,b,c,d){f.getPostponeReason(a,b,c,d),a.stopPropagation()},f.$on("timePickerCanceled",function(){}),f.$on("timePicked",function(a,b,c){function d(a){if(!a)return"";var b=a.split(":");return"00"==b[1]?b[1]="30":(b[1]="00",b[0]=(Number(b[0])+1)%24>9?""+(Number(b[0])+1)%24:"0"+(Number(b[0])+1)%24),b[0]+":"+b[1]}return new Date(c[3].DISPDATE+" "+c[3].DISPTIME.split("-")[0]).getTime()>=new Date(b).getTime()?void f.$parent.alert("不能选择过去的时间","warning"):(new Date).getTime()>=new Date(b).getTime()?void f.$parent.alert("不能选择过去的时间","warning"):void e.delayservice({date:b.split(" ")[0],time:b.split(" ")[1]+"-"+d(b.split(" ")[1]),orderID:c[2],reason:f.choisedDelayReason}).success(function(a){q.splice(a,!0),r.splice(a,!0)}).error(n)}),f.exception_reject=function(a,b,c){i.openConfirm({template:"delivery_reject.html",data:{},controller:["$scope","LocalStorageService",function(a,b){a.config={},angular.extend(a.config,f.config),a.delivery_reject=function(b){return!a.reject_reason||Number(a.reject_reason)<=0?(f.$parent.alert("拒签理由必须选择","warning"),void(a.reject_warning="拒签理由必须选择")):void e.rejectservice({orderId:c,reason:a.reject_reason}).success(function(a){f.$parent.alert("已经成功拒签","success"),q.splice(a),r.splice(a),w.refresh()}).error(n)}}]}),a.stopPropagation()},f.getPostponeReason=function(b,c,d,g){i.openConfirm({template:"views/postpone_reason.html",data:{},controller:["$scope","LocalStorageService",function(b,h){b.config={},b.reasons=null,b.choisedReason=null,angular.extend(b.config,f.config);var i=function(){e.getPostponeReason().success(function(a){b.reasons=a}).error(function(b){a.error("getPostponeReason - > "+angular.toJson(b))})};i(),b.choiseReason=function(a,e){return null!=b.choisedReason?(f.$parent.alert("延期理由必须选择","warning"),void(b.reject_warning="延期理由必须选择")):(f.choisedDelayReason=e,void f.$parent.$broadcast("openTimePicker",c,d,g))}}]}),b.stopPropagation()},f.gaporders=function(a,b){i.openConfirm({data:{msg:"确认抢此单？"}}).then(function(){f.target=a.target||a.srcElement,e.gaporders({orderId:b,type:1}).success(function(a){f.target.parentElement.parentElement.style.display="none",f.$parent.alert("抢单完成","success"),o.splice(a),p.splice(a),o.refresh()}).error(n)}),a.stopPropagation()}}}}}]),dliveryAppDirectives.directive("lazyLoad",["$log","$window",function(a,b){return{restrict:"EA",link:function(a,b,c){function d(){i=l.find("img"),e(i),j=f(i),h(i)}function e(a){angular.forEach(a,function(a,b){k&&k[b]&&angular.element(a).attr("data-src",k[b])})}function f(a){for(var b=0,c=a.length,d=[];c>b;b++)d.push(a[b]);return d}function g(){return document.documentElement.clientHeight}function h(){var a,b,c,d,e=0;if(j)for(;e<j.length;e++)a=j[e],d=a.getBoundingClientRect(),d.top<=m-n&&(b=angular.element(a),c=b.attr("data-src"),b.attr("src",c))}var i,j,k,l=b,m=g(),n=50;a.$on("getProductsDone",function(a,b){k=b.imgUrlList}),a.$on("repeatDone",function(a,b){d()}),l.on("scroll",function(a){h()}),window.addEventListener("resize",function(){m=g(),h()})}}}]),dliveryAppDirectives.directive("scrollWatch",["$log","$cookieStore",function(a,b){return{restrict:"EA",link:function(a,c,d){a.$on("repeatDone",function(){var a=b.get("scrollTop");a&&(c[0].scrollTop=a)}),c.on("scroll",function(a){var c=a.target?a.target:a.srcElement,d=c.scrollTop;b.put("scrollTop",d)})}}}]),dliveryAppDirectives.directive("timePicker",["$timeout","$compile","$ionicScrollDelegate","$ionicBackdrop","$q",function(a,b,c,d,e){return{template:"<div>{{selectDateTime.show}}</div>",restrict:"AE",replace:!0,scope:{timePickerResult:"="},link:function(e,f,g){function h(a){i(a),j(a),x=angular.element(x),b(x)(e),angular.element(document.body).append(x),e.dateScroll=c.$getByHandle("dateScroll"),e.timeScroll=c.$getByHandle("timeScroll"),t(),s()}function i(a){var b=a.dateStart.getFullYear(),c=a.dateStart.getMonth(),d=a.dateStart.getDate(),f=new Date;f.getDate(),"日一二三四五六".charAt(k);o(e.dateList,3,"b");for(var g=0;g<a.dateNum;g++){var h=new Date(b,c,d+g),i=h.getMonth()+1,j=h.getDate(),k=h.getDay();"日一二三四五六".charAt(k);if(i=m(i,10),j=m(j,10),parseInt(j)==q(f,0))p="今天";else if(parseInt(j)==q(f,1))p="明天";else if(parseInt(j)==q(f,2))p="后天";else var p=i+"月"+j+"日";var r=i+"-"+j,s=h.getFullYear(),t=a.height+e.dateList[e.dateList.length-1].top;e.dateList.push(n(0,t,r,!1,p,s))}o(e.dateList,3,"e");var u=l(a);angular.forEach(e.dateList,function(a,b){return a.data==u?(a.selected=!0,e.selectDateTime.date.item=a,void(e.selectDateTime.date.index=b)):void 0})}function j(a){o(e.timeList,3,"b");for(var b=0;b<a.timeNum;b++){var c=a.timeStart+b;c>=24?(c-=24,c=m(c,10)):10>c&&(c=m(c,10));for(var d=0;d<60/a.timeSpan;d++){var f=a.height+e.timeList[e.timeList.length-1].top,g=c+":"+(d*a.timeSpan==0?"00":d*a.timeSpan);e.timeList.push(n(0,f,g,!1,g))}}o(e.timeList,3,"e");var h=k(a);angular.forEach(e.timeList,function(a,b){return a.data==h?(a.selected=!0,e.selectDateTime.time.item=a,void(e.selectDateTime.time.index=b)):void 0})}function k(a){var b=new Date,c=b.getHours(),d=b.getMinutes();d+=a.minuteSkip;var e,f=d-60;switch(f>=0?(c+=1,e=Math.round(Math.abs(f)/a.timeSpan)):e=Math.round(d/a.timeSpan),e){case 1:d=a.timeSpan;break;case 2:d=2*a.timeSpan;break;case 3:d=3*a.timeSpan;break;case 4:c+=1,d=0;default:d=0}return m(c,10)+":"+m(d,10)}function l(a){return e.dateList[3].data}function m(a,b){return a>=b?a:"0"+a}function n(a,b,c,d,e,f){var g={left:a,top:b,data:c,selected:d,text:e,year:f};return g}function o(a,b,c){switch(c=c||"b"){case"b":for(var d=0;b>d;d++)a.push(n(0,y.height*d,"",!1,""));break;case"e":for(var e=a[a.length-1].top,f=0;b>f;f++)a.push(n(0,y.height*(d+1)+e,"",!1,""))}}function p(a,b){b=b||!1,angular.forEach(a,function(a,c){a.selected=b})}function q(a,b){a.setDate(a.getDate()+b);var c=a.getDate();return a.setDate(a.getDate()-b),c}function r(a,b){a.scrollTo(b.left,b.top,!0)}function s(){var a=e.selectDateTime.date.item.text,b=e.selectDateTime.time.item.text;e.selectDateTime.show=a+" "+b}function t(){for(var a="",b="",c=-1,d=0;d<e.dateList.length;d++)if(e.dateList[d].selected){a=e.dateList[d].data,e.selectDateTime.date.item=e.dateList[d],e.selectDateTime.date.index=d,c=d;break}for(var f=0;f<e.timeList.length;f++)if(e.timeList[f].selected){b=e.timeList[f].data,e.selectDateTime.time.item=e.timeList[f],e.selectDateTime.time.index=f;break}a||(a=e.selectDateTime.date.item.data),b||(b=e.selectDateTime.time.item.data);var g=e.dateList[c].year+"-"+a+" "+b;return e.timePickerResult=g,g}function u(){d.retain(),x.css("display","block")}function v(){x.css("display","none"),d.release()}function w(){x.remove()}var x="<div class='pickerContainer datetimeactive'><div class='pp'><div  class='header'>{{title}}</div><div class='body'><ion-scroll on-scroll='dateScrolling($event)' delegate-handle='dateScroll' scrollbar-y='false' class='dateContent'><ul><li ng-style='date.selected ? { color: \"#0081b8\",fontWeight: \"bold\", fontSize: \"1.5em\"}:{}' ng-click='selectDate($index)' ng-repeat='date in dateList'>{{date.text}}</li></ul></ion-scroll><ion-scroll on-scroll='timeScrolling($event)' delegate-handle='timeScroll' scrollbar-y='false' class='timeContent'><ul><li ng-style='time.selected ? { color: \"#0081b8\",fontWeight: \"bold\", fontSize: \"1.5em\"}:{}' show ='$index > selectDateTime.time.index' ng-click='$index > selectDateTime.time.index?selectTime($index):null' ng-repeat='time in timeList'>{{time.text}}{{time.text?'-':''}}{{getTimeTo(time.text)}}</li></ul></ion-scroll></div><div class='footer'><span ng-click='ok()'>确定</span><span ng-click='cancel()'>取消</span></div></div></div>",y={title:g.title||"时间选择",bodyHeight:1,height:40,dateNum:1,timeNum:24,dateStart:new Date,timeStart:0,timeSpan:g.timeSpan||30,minuteSkip:30};e.title=y.title,e.dateList=[],e.timeList=[],e.selectDateTime={date:{item:{data:""},index:0},time:{item:{data:"00:00"},index:0},show:""},e.getTimeTo=function(a){if(!a)return"";var b=a.split(":");return"00"==b[1]?b[1]="30":(b[1]="00",b[0]=(Number(b[0])+1)%24>9?""+(Number(b[0])+1)%24:"0"+(Number(b[0])+1)%24),b[0]+":"+b[1]},h(y),e.$on("openTimePicker",function(){e.currArguments=arguments,u();var a=0,b=0;angular.forEach(e.dateList,function(b,c){new Date(b.year+"-"+b.data).getTime()==new Date(e.currArguments[3].DISPDATE).getTime()&&(a=c)},this),angular.forEach(e.timeList,function(a,c){!b&&new Date("1700-01-01 "+a.data).getTime()>new Date("1700-01-01 "+e.currArguments[3].DISPTIME.split("-")[1]).getTime()&&(b=c)},this),r(e.timeScroll,e.timeList[b-3]),r(e.dateScroll,e.dateList[a-3])}),f.on("click",function(){u(),r(e.timeScroll,e.timeList[e.selectDateTime.time.index-3]),r(e.dateScroll,e.dateList[e.selectDateTime.date.index-3])}),e.dateScrolling=function(b){var c=e.dateScroll.getScrollPosition();angular.forEach(e.dateList,function(b,d){c.top>=b.top&&c.top<e.dateList[d+1].top&&(p(e.dateList),a(function(){e.dateList[d+3].selected=!0}))})},e.timeScrolling=function(b){var c=e.timeScroll.getScrollPosition();angular.forEach(e.timeList,function(b,d){c.top>=b.top&&c.top<e.timeList[d+1].top&&(p(e.timeList),a(function(){e.timeList[d+3].selected=!0}))})},e.ok=function(){var a=t();s(),v(),this.$parent.$broadcast("timePicked",a,this.currArguments)},e.ok2=function(){},e.cancel=function(){v()},e.selectDate=function(a){a>2&&a<=e.dateList.length-3&&r(e.dateScroll,e.dateList[a-3])},e.selectTime=function(a){a>2&&a<=e.timeList.length-3&&r(e.timeScroll,e.timeList[a-3])},e.$on("$destroy",function(){w()})}}}]),dliveryAppDirectives.factory("Interceptor",["$q","$log","$location","$rootScope","$timeout","LocalStorageService",function(a,b,c,d,e,f){d._needLogin=!0;var g=function(a){return d.$emit("appendLoading",a.url),a},h=function(a){return d.$emit("removeLoading",a.config.url),a},i=function(b){return d.$emit("removeLoading",b.config.url),a.reject(b)},j=function(b){return b.config?d.$emit("removeLoading",b.config.url):d.$emit("removeAllLoading"),console.log("responseError:"+b.status),401==b.status?(f.clear(),e(function(){c.path("/login")},100)):0==b.status&&d._needLogin&&(f.clear(),e(function(){c.path("/login")},100)),a.reject(b)};return{request:g,response:h,requestError:i,responseError:j}}]),dliveryApp.run(["$rootScope","ngDialog","toastr",function(a,b,c){a.loading_quene={},a.$on("appendLoading",function(b,c){a.loading_quene[c]=!0}),a.$on("removeAllLoading",function(){a.loading_quene={}}),a.$on("removeLoading",function(b,c){delete a.loading_quene[c]})}]),dliveryApp.run(["$ionicPlatform","$rootScope","$location","$timeout","$ionicHistory","$ionicPopup",function(a,b,c,d,e,f){a.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleLightContent(),a.registerBackButtonAction(function(a){function c(){var a=f.confirm({title:"<strong>退出应用?</strong>",template:"你确定要退出应用吗?",okText:"退出",cancelText:"取消"});a.then(function(a){a&&ionic.Platform.exitApp()})}return b.bindBackButtonAction(c),a.preventDefault(),!1},101)})}]),angular.module("deliveryUiApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),dliveryAppControllers.controller("LoginController",["$scope","$rootScope","$log","$location","$timeout","URLService","ValidateService","UserService","LocalStorageService","ngDialog",function(a,b,c,d,e,f,g,h,i,j){var k=function(b){b?a.alert(b.error?b.error:angular.toJson(b),"error"):a.alert("连接服务器失败！","error")};if(a.isOfficeService=URLObj.Config.isOfficialServer(),a.version=URLObj.Config.version,h.isLogined())return void e(function(){d.path("/main")});var l=i.get("user")||{};a.vm={flag:!1,username:"",password:"",regpwd:"",regrepwd:"",isRemenberUserName:l.username?!0:!1,isRemenberPassword:l.password&&l.username?!0:!1,login_title:"登录("+URLObj.Config.getDescription()+")"};var m=function(){if(l.username&&l.password){var a=decodeURIComponent(l.username),b=decodeURIComponent(l.password);n(a,b)}};a.changePwd=function(b,c,d){c!=d&&a.alert("两次新密码输入不同，请从新输入！","error")},a.switchServer=function(b){"undefined"==typeof b?a.isOfficeService=URLObj.Config["switch"]():!b&&a.isOfficeService?a.isOfficeService=URLObj.Config["switch"]():b&&!a.isOfficeService&&(a.isOfficeService=URLObj.Config["switch"]()),a.vm.login_title="登录("+URLObj.Config.getDescription()+")";for(var c in f)f[c]=URLObj.Config.urls[c]},a.changeServer=function(b){URLObj.Config.changeServer(),a.vm.login_title="登录("+URLObj.Config.getDescription()+")";for(var c in f)f[c]=URLObj.Config.urls[c]},a.login=function(b){g.validateLoginForm(a)&&n(a.vm.username,a.vm.password)};var n=function(b,c){h.login({mobile:b,password:c}).success(function(d,e,f){if(d.success){a.$root.userInfo={username:b};var g=i.get("user")||{};i.set("user",angular.extend(g,{username:encodeURIComponent(b),password:encodeURIComponent(c)})),h.doLogin(f)}else null!=d.error&&j.openConfirm({data:{msg:"用户名或密码错误，请重新登陆"}})}).error(k)};m(),b.isRNApp&&window.postMessage(JSON.stringify({action:"changeStatusBar",payload:{theme:"blue"}}))}]),dliveryAppControllers.controller("ChangePwdController",["$scope","$log","$location","$timeout","URLService","ValidateService","UserService","LocalStorageService","ngDialog",function(a,b,c,d,e,f,g,h,i){a.vm={username:a.userInfo?a.userInfo.username:null,oldPassword:null,newPassword:null,reNewPassword:null},a.changePwd=function(b){a.vm.newPassword!=a.vm.reNewPassword?a.alert("新密码两次输入不一致！","error"):g.changePassword(a.vm).success(function(b){a.alert("修改密码成功！","success"),c.path("/main")}).error(function(b){b.error&&a.alert(b.error,"error")})}}]),dliveryAppControllers.controller("DeliverListController",["$rootScope","$scope","$log","$location","LocalStorageService","UserService","DeliveryListService","ngDialog",function(a,b,c,d,e,f,g,h){return f.isLogined()?(b.showPackageDetial=!1,b.currPackageDetial=null,b.currPackage=null,b.isSearch=!1,b.$watch("currPackage",function(a,c){b.delivery=a},!0),b.$on("deliverFromRoot",function(a){b.deliver()}),a.$on("refreshDelivery",function(){b.refresh()}),b.logined=f.isLogined(),b.tabPage="deliver",b.dragDown=function(){b.$broadcast("dragDown")},b.release=function(){b.$broadcast("release")},b.deliver=function(){b.tabPage="deliver",b.$broadcast("deliver")},b.deliverFinsh=function(){b.tabPage="deliverFinsh",b.$broadcast("deliverFinsh")},b.deliverUndisp=function(){b.tabPage="deliverUndisp",b.$broadcast("deliverUndisp")},b.deliverException=function(){b.tabPage="deliverException",b.$broadcast("deliverException")},b.deliverExit=function(){b.$broadcast("deliverExit")},b.scan=function(){b.$broadcast("scan")},b.search=function(a){b.$broadcast("search",a)},b.refresh=function(){b.$broadcast("refresh")},b.path=function(a){d.path(a)},b.back=function(){history.back()},b.selectDial=function(a){h.openConfirm({template:"views/dialDialog.tpl.html",data:{list:[{tel:a.RECEIVERMOBILE,name:"下单人"},{tel:a.RECEIVERMOBILE,name:"收货人"}]}})},void(a.isRNApp&&window.postMessage(JSON.stringify({action:"changeStatusBar",payload:{theme:"gray"}})))):void setTimeout(function(){f.logout()},0)}]),dliveryAppControllers.controller("PositionController",["$scope","$routeParams","$location",function(a,b,c){console.log("position.html");var d=b.Catalog,e=b.OrderID;a.isRealPhone=!1,"userLocation"==d?a.templateUrl="position.html":a.templateUrl="position.html?Catalog="+d+"&OrderID="+e,a.returnBack=function(b){c.path("/main"),a.$emit("refreshDelivery")}}]),dliveryAppDirectives.factory("ValidateService",["$log","ngDialog",function(a,b){var c=function(a){var b,c=!0;return a.loginform.username.$invalid?(b=a.loginform.username.$error,c=!1,b.required?a.alert("用户名不能为空","error"):b.pattern&&a.alert("用户名不合法","error")):a.loginform.password.$invalid&&(b=a.loginform.password.$error,c=!1,b.required&&a.alert("密码不能为空","error")),c},d=function(a){var b,c=!0;return a.regform.phone.$invalid?(b=a.regform.phone.$error,c=!1,b.required&&a.alert("手机号码不能为空","error"),b.pattern&&a.alert("手机号码格式不正确","error")):a.regform.regpwd.$invalid?(b=a.regform.regpwd.$error,c=!1,b.required&&a.alert("密码不能为空","error")):a.regform.regrepwd.$invalid?(b=a.regform.regrepwd.$error,c=!1,b.required&&a.alert("请再次输入密码","error")):a.regform.regrepwd.$modelValue!=a.regform.regpwd.$modelValue&&(c=!1,a.alert("两次密码不一致，请重新输入","error")),c};return{validateLoginForm:c,validateRegisterForm:d}}]),dliveryAppDirectives.factory("LocalStorageService",function(){var a=function(a){return!a},b=function(b,c){if(!a(b)){var d=angular.isObject(c)?angular.toJson(c):c;localStorage.setItem(b,d)}},c=function(b){if(!a(b))try{return angular.fromJson(localStorage.getItem(b))}catch(c){return localStorage.getItem(b)}},d=function(){var a=c("user");localStorage.clear(),a&&(delete a.username,delete a.password,b("user",a))},e=function(b){a(b)||localStorage.removeItem(b)},f=function(){return localStorage.length};return{set:b,get:c,clear:d,remove:e,length:f}}),dliveryAppDirectives.factory("URLService",["$log","$location",function(a,b){return URLObj.Config.urls}]),dliveryAppDirectives.factory("UserService",["$log","$http","$rootScope","$location","ngDialog","URLService","LocalStorageService",function(a,b,c,d,e,f,g){var h=function(){return b({method:"GET",url:f.getUser,headers:{__scm_sessionid:g.get("__scm_sessionid")}})},i=function(a){var c=a.mobile,d=a.password;return b.post(f.login,{NAME:c,PASSWORD:d,__zaofans:!0})},j=function(a){return b.post(f.changePwd,{USERNAME:a.username,OLDPASSWORD:a.oldPassword,NEWPASSWORD:a.newPassword,__zaofans:!0})},k=function(){return c._needLogin},l=function(a){var b=a("__scm_sessionid");g.set("__scm_sessionid",b),c._needLogin=!1,d.path("/main")},m=function(){g.clear(),e.closeAll(),c._needLogin=!0,d.path("/login")},n=function(){return k()?!1:g.get("__scm_sessionid")?!0:!1};return{getUser:h,logout:m,login:i,changePassword:j,needLogin:k,isLogined:n,doLogin:l}}]),dliveryAppDirectives.factory("DeliveryListService",["$log","$http","URLService","LocalStorageService",function(a,b,c,d){var e=function(a){return b({method:"GET",url:c.getInitialOrders+"/"+a.pageIndex+"/"+a.pageNum,headers:{__scm_sessionid:d.get("__scm_sessionid")}})},f=function(a){return b({method:"GET",url:c.searchInitialList+"/"+a.content+"/"+a.pageIndex+"/"+a.pageNum,headers:{__scm_sessionid:d.get("__scm_sessionid")}})},g=function(a){var e=a.status+"/"+a.pageIndex+"/"+a.pageNum;return b({method:"GET",url:c.getDeliveryList+e,headers:{__scm_sessionid:d.get("__scm_sessionid")}})},h=function(a){return b({method:"GET",url:c.searchDeliveryList+a.status+"/"+a.content+"/"+a.pageIndex+"/"+a.pageNum,headers:{__scm_sessionid:d.get("__scm_sessionid")}})},i=function(a){var e=a.orderId,f=a.type,g=a.identityId,h={orderID:e,type:f,checkCode:g,__zaofans:!0};return b.post(c.identityURL,h,{headers:{__scm_sessionid:d.get("__scm_sessionid")}})},j=function(a){var e=a.orderId,f=a.reason,g={orderID:e,reason:f,__zaofans:!0};return b.post(c.rejectURL,g,{headers:{__scm_sessionid:d.get("__scm_sessionid")}})},k=function(a){var e=(a.datetime,{date:a.date,time:a.time,orderID:a.orderID,reason:a.reason,__zaofans:!0});return b.post(c.delayURL,e,{headers:{__scm_sessionid:d.get("__scm_sessionid")}})},l=function(a){return b.post(c.claimGoods,a,{headers:{__scm_sessionid:d.get("__scm_sessionid")}})},m=function(a){return b.get(c.getPostponeReason)},n=function(a){var e={orderID:a.orderId,type:a.type,__zaofans:!0};return b.post(c.gapOrderURL,e,{headers:{__scm_sessionid:d.get("__scm_sessionid")}})};return{getInitialList:e,searchInitialList:f,getDeliveryList:g,searchDeliveryList:h,getPostponeReason:m,identifyservice:i,rejectservice:j,delayservice:k,claimGoods:l,gaporders:n}}]),angular.module("deliveryUiApp").run(["$templateCache",function(a){a.put("views/DeliveryList.tpl.html",'<style>.nav-btn .img{\n    height: 20px;\n    width: auto;\n    display: block;\n    margin: 0 auto;\n  }\n\n  .img.grabOrder {\n    height: 23px;\n    -webkit-transform: translateY(3px);\n    -moz-transform: translateY(3px);\n    -ms-transform: translateY(3px);\n    -o-transform: translateY(3px);\n    transform: translateY(3px);\n  }\n\n  .nav-btn span{\n    font-size: 12px;\n  }\n\n  .nav-btn{\n    -webkit-box-flex: 0.2;\n    -webkit-flex: 0.2;\n    flex: 0.2;\n  }\n\n  .nav-btn:nth-child(3) .img{\n    height: 40px;\n    margin-top: -20px;\n    border: 2px solid #ffffff;\n    -webkit-border-radius: 50%;\n    -moz-border-radius: 50%;\n    border-radius: 50%;\n  }</style> <ion-header-bar bak_class="bar-positive"> </ion-header-bar> <header> <div class="searchDiv flex flex-vcenter flex-hSbetween"> <div class="Delivery_menu" ng-click="openNavigation()"><i class="fa fa-bars fa-2x"></i></div> <div class="div1"> <input type="search" class="hasRadius" ng-model="searchContent" id="searchContent" placeholder="请输入取餐人姓名或地址或电话"> </div> <div class="div2"> <button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-class="{active : isSearch}" ng-click="search(searchContent)">搜</button> <button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-click="scan()">扫</button> </div> </div> <div class="div0" id="position_memo" style="display: none">未配送</div> </header> <when-scrolled ng-show="!showPackageDetial" config="scrollConfig" is-search="isSearch" status="status" curr-package="currPackage" show-package-detial="showPackageDetial" curr-package-detial="currPackageDetial"></when-scrolled> <div ng-include="\'views/packageDetail.tpl.html\'" ng-if="showPackageDetial"></div> <time-picker if="openTimePicker" timepickerresult="1" style="display: none"></time-picker> <!--<footer class="d-f" ng-if="showPackageDetial"><a ng-click="bindBackButtonAction()" class="btn hasRadius brown" style="display: block;float: right">返回</a></footer>--> <footer class="d-f flex flex-vcenter flex-hSaround" ng-if="!showPackageDetial"> <div class="nav-btn" ng-click="deliverFinsh()"> <img class="img" ng-if="tabPage == \'deliverFinsh\'" src="img/yipeisong@2x.png"> <img class="img" ng-if="tabPage != \'deliverFinsh\'" src="img/yipeisong-icon@2x.png"> <span ng-style="{color : tabPage == \'deliverFinsh\'?\'#00aef1\':\'\'}">已配送</span> </div> <div class="nav-btn" ng-click="deliverUndisp()"> <img class="img grabOrder" ng-if="tabPage == \'deliverUndisp\'" src="img/qiangdan-icon--.@2x.png"> <img class="img grabOrder" ng-if="tabPage != \'deliverUndisp\'" src="img/qiangdan-icon-KB@2x.png"> <span ng-style="{color : tabPage == \'deliverUndisp\'?\'#00aef1\':\'\'}">抢单</span> </div> <div class="nav-btn" ng-click="deliver()"> <img class="img" ng-if="tabPage == \'deliver\'" src="img/weipeisong--icon@2x.png"> <img class="img" ng-if="tabPage != \'deliver\'" src="img/weipeisong--icon@2x.png"> <span ng-style="{color : tabPage == \'deliver\'?\'#00aef1\':\'\'}">未配送</span> </div> <div class="nav-btn" ng-click="deliverException()"> <img class="img" ng-if="tabPage == \'deliverException\'" src="img/yiquxiao-icon@2x.png"> <img class="img" ng-if="tabPage != \'deliverException\'" src="img/yiquxiao-icon@2x_2.png"> <span ng-style="{color : tabPage == \'deliverException\'?\'#00aef1\':\'\'}">已取消</span> </div> <div class="nav-btn" ng-click="deliverExit()"> <img class="img" src="img/tuchu-icon@2x.png"> <span>退出登录</span> </div> <!--<a ng-href="#/position/userLocation/-1">--> <!--<button class="btn yellow hasRadius ngdialog-button-primary">位置</button>--> <!--</a>--> <!--<button class="btn blue hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliverFinsh\'}" ng-click="deliverFinsh()">已配</button>--> <!--<button class="btn green hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliver\'}" ng-click="deliver()">待配</button>--> <!--<button class="btn brown hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliverUndisp\'}" ng-click="deliverUndisp()">抢单</button>--> <!--<button class="btn orange hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliverException\'}" ng-click="deliverException()">已取消</button>--> <!--<button class="btn gray hasRadius ngdialog-button-primary" ng-click="deliverExit()">退出</button>--> </footer>'),
a.put("views/LoginRegister.tpl.html",'<div class="login-reg"> <div class="login_reg_tab"> <p class="login_show" id="login_title" ng-click="vm.flag=false">{{vm.login_title}}</p> <p class="clear"></p> </div> <div class="login" ng-show="!vm.flag"> <div class="main"> <form id="loginform" name="loginform" ng-submit="login($event)" novalidate> <div class="div1"> <input type="text" name="username" id="username" placeholder="请输入您的用户名" ng-model="vm.username" required> </div> <div class="div2"> <input type="password" name="password" id="password" placeholder="请输入您的密码" required ng-model="vm.password"> </div> </form> <div class="click_wrapper" ng-click="vm.isRemenberPassword = !vm.isRemenberPassword"><i class="fa fa-circle fa-2x" ng-class="{active : vm.isRemenberPassword}"></i><input id="remenber_password" type="checkbox" ng-model="vm.isRemenberPassword"><label for="">记住密码</label></div> <div class="click_wrapper" ng-click="vm.isRemenberUserName = !vm.isRemenberUserName"><i class="fa fa-circle fa-2x" ng-class="{active : vm.isRemenberUserName}"></i><input id="remenber_username" type="checkbox" ng-model="vm.isRemenberUserName"><label for="">记住用户名</label></div> <input form="loginform" type="submit" id="login_button" value="登&nbsp;&nbsp;&nbsp;录"> <button id="change_button" ng-click="changeServer()">切&nbsp;&nbsp;&nbsp;换</button> <div class="switch server_type"> <!--<div class="groove switch-groove server_type" ng-click="switchServer()" ng-style="{\'background-color\' : isOfficeService?\'white\':\'gray\'}">--> <!--<i class="guillotine switch-guillotine server_type fa fa-circle fa-3x" ng-class="{open : isOfficeService,close : !isOfficeService}"></i>--> <!--</div>--> <label class="toggle toggle-balanced" style="float: right" ng-click="switchServer()" ng-swipe-left="switchServer(false)" ng-swipe-right="switchServer(true)"> <input type="checkbox" ng-model="isOfficeService"> <div class="track"> <div class="handle"></div> </div> </label> <span class="label server_type" ng-if="!isOfficeService">正式坏境－关</span> <span class="label server_type" ng-if="isOfficeService">正式坏境－开</span> </div> <div class="delivery_version">版本号:{{version}}</div> </div> </div> </div>'),a.put("views/Position.tpl.html",'<div class="position_container" id="position_container" ng-if="!isRealPhone"> <footer class="d-f"><a href="javascript:;" ng-click="returnBack($event)" class="btn hasRadius blue" style="display: block;float: right">返回</a></footer> <iframe ng-src="{{templateUrl}}" style="width:100%;height:calc(100% - 52px);border:none" frameborder="0"> </div>'),a.put("views/changePassword.tpl.html",'<div class="login-userInterface"><!--login-reg --> <header class="changePassword leftTab">修改密码</header> <div class="transparent" onclick="window.history.back()" id="back"></div> <!--\r\n  <div class="login_reg_tab">\r\n    <p class="login_show" id="login_title" ng-click="vm.flag=false">修改密码</p>\r\n\r\n    <p class="clear"></p>\r\n  </div>--> <div class="login" ng-show="!vm.flag"> <div class="main"> <form id="loginform" name="loginform" ng-submit="changePwd($event)" novalidate> <div class="div1"> <img src="img/user.png" alt=""> <input show="!vm.username" type="text" name="oldpassword" id="oldpassword" placeholder="请输入用户名" ng-model="vm.username" required> </div> <div class="div3"> <img src="img/lock.png" alt=""> <input type="password" name="oldpassword" id="oldpassword" placeholder="请输入旧密码" ng-model="vm.oldPassword" required> </div> <div class="div3"> <img src="img/lock.png" alt=""> <input type="password" name="password" id="password" placeholder="请输入新密码" required ng-model="vm.newPassword"> </div> <div class="div2"> <img src="img/lock-sure.png" alt=""> <input type="password" name="repassword" id="repassword" placeholder="请确认新密码" required ng-model="vm.reNewPassword"> </div> </form> <div class="wrapper input-wrapper changePassword"> <input type="submit" id="modify_password" form="loginform" value="确认修改" class="btn blue"> <!--<input form="loginform" type="submit" id="modify_password" value="保存"/>\r\n        <input form="loginform" onclick="window.history.back()" type="reset" id="back" value="返回"/>--> </div> </div> </div> </div>'),a.put("views/classifyList/backList.tpl.html",'<section class="d-m-info un delivery_list" ng-if="status==\'BACK\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li> <text class="text_hint">送餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">送餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}" class="telephone">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1+\'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint" ng-if="delivery.REJECT_REASON != 0">拒签原因：</text> <span type="text" ng-if="delivery.REJECT_REASON != 0" ng-bind="config.reject_reason_no_white_space[delivery.REJECT_REASON - 1]"></span> </li> <li> <text class="text_hint">地&nbsp;&nbsp;&nbsp;&nbsp;址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp; {{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> </ul> <div class="d-m-i-s" ng-show="delivery.DISPSTATUS==\'BACK\' && !showPackageDetial"> <!--<div class="div1">--> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> <!--<a ng-href="#/position/{{status}}_{{isSearch}}/{{delivery.ID}}">--> <!--<button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-click="baiduMapButton($event)">--> <!--地&nbsp;&nbsp;图--> <!--</button>--> <!--</a>--> <!--</div>--> <!--<div class="div2">--> <!--<button class="btn_delivery green hasRadius ngdialog-button-primary" ng-click="gaporders($event,delivery.ID)">--> <!--我&nbsp;来&nbsp;送--> <!--</button>--> <!--</div>--> </div> </section>'),a.put("views/classifyList/complateList.tpl.html",'<section class="d-m-info f delivery_list" ng-if="status==\'COMPLETE\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li> <text class="text_hint">送餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">送餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}" class="telephone">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1+ \'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint">送餐地址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp;{{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> <li> <text class="text_hint">配送时间：</text> <span type="text" class="delivery_dispdate" ng-bind="delivery.RECEIVEDTIME"></span> </li>  </ul> <div class="d-m-i-s" ng-show="!showPackageDetial"> <!--<div class="div2">--> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> <!--</div>--> <!--<a ng-href="#/position/{{status}}_{{isSearch}}/{{delivery.ID}}">--> <!--<button class="btn_delivery blue hasRadius ngdialog-button-primary"  ng-click="baiduMapButton($event)">--> <!--地&nbsp;&nbsp;图--> <!--</button>--> <!--</a>--> </div> </section>'),a.put("views/classifyList/distributedList.tpl.html",'<section class="d-m-info delivery_list" ng-if="status==\'DISTRIBUTED\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li ng-class="{over_time : delivery.URGENCY == \'LATED\',warnning_time : delivery.URGENCY == \'URGENT\'}"> <text class="text_hint">取餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">取餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1+ \'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint">取餐地址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp; {{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> </ul> <div class="d-m-i-s" ng-if="delivery.DISPSTATUS == \'DISPATCHING\'  && !showPackageDetial"> <div class="nav-btn right" ng-click="exception_reject($event,identyfy,delivery.ID)"> <img class="img2" src="img/icon_juqian@2x.png"> <span>拒签</span> </div> <div class="nav-btn right" ng-click="exception_delay($event,identyfy,delivery.ID,delivery)"> <img class="img2" src="img/yanqi-icon@2x.png"> <span>延期</span> </div> <div class="nav-btn right" ng-click="ideatify($event,identyfy,delivery.ID)"> <img class="img2" src="img/quhuo@2x.png"> <span>确认</span> </div> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> </div> <div class="d-m-i-s" ng-if="(delivery.DISPSTATUS == \'INITIAL\' || delivery.DISPSTATUS == \'DISTRIBUTED\' ) && !showPackageDetial"> <div class="nav-btn right" ng-click="claimGoods($event,identyfy,delivery.ID)"> <img class="img2" src="img/shouhuo--icon@2x.png"> <span>取货</span> </div> </div> </section>'),a.put("views/classifyList/initialList.tpl.html",'<section class="d-m-info un delivery_list" ng-if="status==\'INITIAL\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li> <text class="text_hint">送餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">送餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}" class="telephone">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1 + \'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint">送餐地址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp; {{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> </ul> <div class="d-m-i-s" ng-show="delivery.DISPSTATUS==\'INITIAL\'  && !showPackageDetial"> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> <!--<a ng-href="#/position/{{status}}_{{isSearch}}/{{delivery.ID}}">--> <!--<button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-click="baiduMapButton($event)">--> <!--地&nbsp;&nbsp;图--> <!--</button>--> <!--</a>--> <div class="nav-btn right" ng-click="gaporders($event,delivery.ID)"> <img class="img2" src="img/qiangdan@2x.png"> <span>抢单</span> </div> <!--<button class="btn_delivery green hasRadius ngdialog-button-primary" ng-click="gaporders($event,delivery.ID)">--> <!--抢单--> <!--</button>--> </div> </section>'),a.put("views/dialDialog.tpl.html",'<style>.dial-title{\n    font-size: 14px;\n    margin-top:-.4em;\n    text-align: center;\n  }\n  .dial-list{\n    margin-top:1em;\n  }\n  .dial-list > .dial-item{\n    display: block;\n    padding: 8px 12px;\n    text-align: center;\n  }\n  .dial-list > .dial-item:active{\n    background-color: rgba(0,0,0,.05);\n  }\n  .dial-list > .dial-item:not(:last-child){\n    border-bottom: 1px solid #e0e0e0;\n  }\n  .dial-buttons{\n    -webkit-justify-content: center;\n    justify-content: center;\n  }</style> <div class="ngdialog-message"> <h4 class="dial-title">请选择拨打对象</h4> <div class="dial-list"> <a ng-repeat="item in ngDialogData.list" ng-href="{{\'tel:\'+item.tel}}" class="dial-item"> {{item.name}}: {{item.tel}} </a> </div> </div> <div class="ngdialog-buttons flex dial-buttons"> <button type="button" id="alertModel-buttons" class="ngdialog-button" ng-click="confirm()"> {{ngDialogData.buttonText||\'取消\'}} </button> </div>'),a.put("views/directives/DeliveryList.tpl.html",'<div id="d-m" class="d-m"> <!--<div class="d-m" style="height: 100%;overflow: scroll" drag-fresh>--> <!-- 已配送 --> <div class="d-m" ng-show="status==\'COMPLETE\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/complateList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListFinsh | orderBy:DISPTIME:false" ng-if="!isSearch && DeliveryListFinsh.length"></div> <div ng-include="\'views/classifyList/complateList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPTIME:false" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListFinsh.length == 0 && !hasPage">“暂时没有配送成功状态的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">“没有搜索到配送成功状态的配送单”</div> <ion-infinite-scroll ng-if="hasPage && status==\'COMPLETE\' && !isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content> </div> <!-- 待配送 --> <div class="d-m" ng-show="status==\'DISTRIBUTED\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/distributedList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListDisp | orderBy:DISPTIME:false" ng-if="!isSearch && DeliveryListDisp.length"></div> <div ng-include="\'views/classifyList/distributedList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPTIME:false" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListDisp.length == 0 && !hasPage">“暂时没有等待配送状态的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">”没有搜索到等待配送状态的配送单“</div> <ion-infinite-scroll ng-if="hasPage && status==\'DISTRIBUTED\'&&!isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content></div> <!-- 抢单 --> <div class="d-m" ng-show="status==\'INITIAL\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/initialList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListUnDisp | orderBy:DISPDATE:true" ng-if="!isSearch && DeliveryListUnDisp.length"></div> <div ng-include="\'views/classifyList/initialList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPDATE:true" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListUnDisp.length == 0 && !hasPage">“暂时没有可以抢单的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">”没有搜索到可以抢单的配送单“</div> <ion-infinite-scroll ng-if="hasPage && status==\'INITIAL\' && !isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content></div> <!-- 异常数据 --> <div class="d-m" ng-show="status==\'BACK\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/backList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListException | orderBy:DISPDATE:true" ng-if="!isSearch && DeliveryListException.length"></div> <div ng-include="\'views/classifyList/backList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPDATE:true" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListException.length == 0 && !hasPage">“暂时没有无法配送或者被取消状态的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">”没有搜索到无法配送或者被取消状态的配送单“</div> <ion-infinite-scroll ng-if="hasPage && status==\'BACK\'&&!isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content></div> </div>'),a.put("views/directives/dragFresh.html",'<div class="m-dragFresh-rotate" ng-show="rotateUnit.show" ng-style="{ \'-webkit-transform\' : \'translate(0px,{{rotateUnit.translate}}px) rotate({{rotateUnit.rotate}}deg)\' }"> <img src="images/loading.3a19d385.gif"> </div>'),a.put("views/login.html",'<div class="page lg-page"> <div class="lg-banner"> </div> </div>'),a.put("views/login.tpl.html",'<div class="login-userInterface"> <header class="title-name">登录</header> <div class="brand"> <img ng-if="vm.login_title.indexOf(\'原麦\')>0" src="img/withWheat.png" alt="" class="b-background"> <img ng-if="vm.login_title.indexOf(\'JoySeed\')>0" src="img/joyseed-bg-img.png" alt="" class="b-background"> <div class="brand-center"> <img ng-if="vm.login_title.indexOf(\'原麦\')>0" src="img/wheat-logo.png" alt="" class="wheat-logo"> <img ng-if="vm.login_title.indexOf(\'JoySeed\')>0" src="img/joyseed-logo.png" alt="" class="wheat-logo"> <br> <span class="brand-name">{{vm.login_title}}</span> </div> </div> <div class="main-body"> <div class="entry"> <form id="loginform" name="loginform" ng-submit="login($event)" novalidate> <div class="phoneNum"> <img src="img/mobilePhone.png" alt=""> <input type="text" name="username" id="username" placeholder="请输入您的用户名" ng-model="vm.username" required> </div> <div class="password"> <img src="img/lock.png" alt=""> <input type="password" name="password" id="password" placeholder="请输入您的密码" ng-model="vm.password" required> </div> </form> <div class="modify"><a href="#/changePassword">修改密码</a></div> </div> <input type="submit" class="btn blue" id="login_button" form="loginform" value="登录"> <button class="btn white" id="change_button" ng-click="changeServer()">切换</button> <div class="switch server_type"> <label class="toggle toggle-balanced" style="float: right" ng-click="switchServer()" ng-swipe-left="switchServer(false)" ng-swipe-right="switchServer(true)"> <input type="checkbox" ng-model="isOfficeService"> <div class="track"> <div class="handle"></div> </div> </label> <span class="label server_type" ng-if="!isOfficeService">正式环境－关</span> <span class="label server_type" ng-if="isOfficeService">正式环境－开</span> </div> </div> </div>'),a.put("views/main.html",'<div class="header"> <ul class="nav nav-pills pull-right"> <li class="active"><a ng-href="#">Home</a></li> <li><a ng-href="#">About</a></li> <li><a ng-href="#">Contact</a></li> </ul> <h3 class="text-muted">DeliveryUI</h3> </div> <div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#">Splendid!</a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div> <div class="footer"> <p>♥ from the Yeoman team</p> </div>'),a.put("views/navigator.tpl.html",'<div class="usercenter"> <div class="u-u-info"> <dl> <dt><img class="usercenter_head" width="100" height="100"></dt> <dd>{{vm.userObj.MOBILE}}</dd> <dd> {{userInfo.username}} <!-- <button ng-click="rechargeBtnClickHandler($event)" class="mainBackgruond">充值</button>--> </dd> </dl> </div> <div class="clear"></div> <div class="u-fe-back"> <ul> <li class="u-feedback"><a ng-click="gotoDeliverUndisp()"><i class="fa fa-bars fa-lg mainColor space"></i>&nbsp;&nbsp;待配订单</a></li> <li class="u-feedback"><a ng-href="#/changePassword"><i class="fa fa-eraser fa-lg mainColor space"></i>&nbsp;&nbsp;修改密码</a></li> <li class="u-feedback" ng-if="isRNApp"><a ng-click="checkUpdate()"><i class="fa fa-cloud-download fa-lg mainColor space"></i>&nbsp;&nbsp;检查更新</a></li> <!--<li class="u-phone"><a href="tel:400-992-6632"><i class="fa fa-phone fa-lg mainColor space"></i>&nbsp;&nbsp;客服电话： 400-992-6632</a></li>--> <li class="u-feedback"><a ng-click="exitLogin()"><i class="fa fa-close fa-lg mainColor space"></i>&nbsp;&nbsp;退出登录</a></li> <!--<li class="u-issue"><a href="#">常见问题</a></li>--> <!--<li class="u-give"><a ng-click="gotoReward()"><i class="fa fa-money  fa-lg mainColor space"></i>打赏</a></li>--> <!-- <li class="u-give"><a ng-click="gotoCoupon()"><i class="fa fa-money  fa-lg mainColor space"></i>红包</a></li>--> </ul> </div> </div>'),a.put("views/packageDetail.tpl.html",'<style>.package-wrapper{\n    height: 100%;\n    width: 100%;\n    position: fixed;\n    top: 0;\n    overflow-x:hidden;\n    overflow-y: auto;\n    z-index: 1000;\n    background: white;\n  }\n\n  .title.package-title.order-info{\n    height: 45px;\n    font-size: 16px;\n    background: #f0f0f0;\n  }\n\n  .block.package-block{\n    padding: 10px 15px;\n    color: #666;\n  }\n\n  .l-title{\n    -webkit-box-flex: 0.25;\n    -webkit-flex: 0.25;\n    flex: 0.25;\n  }\n\n  .l-value{\n    -webkit-box-flex: 0.75;\n    -webkit-flex: 0.75;\n    flex: 0.75;\n  }\n\n  .package-center-wrappe{\n    padding-left: 15px;\n    padding-right: 15px;\n  }\n\n  .button.packageDetail-button{\n    width: 100%;\n    height: 50px;\n    line-height: 50px;\n    border:0;\n  }\n  .back-arrow-left{\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    border-style: solid;\n    border-color: #bbb transparent transparent #bbb;\n    border-width: 2px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }</style> <div class="wrapper package-wrapper"> <h3 class="title package-title order-info flex flex-vcenter" ng-click="back();"> <span class="back-arrow-left"></span> 订单信息 </h3> <section class="section package-section order-info"> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">订单号</span> <span class="l-value">{{currPackage.ID}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">配送状态</span> <span class="l-value">{{currPackage.__DISPSTATUS__Option__}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">收货人</span> <span class="l-value">{{currPackage.RECEIVERNAME}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">收货地址</span> <span class="l-value">{{currPackage.COUNTYNAME?currPackage.COUNTYNAME+\' \':\'\'}}{{currPackage.ADDRESS}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">收货人电话</span> <span class="l-value">{{currPackage.RECEIVERMOBILE}}</span> </div> <h3 class="title package-title order-info flex flex-vcenter">配送信息</h3> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">配送时间</span> <span class="l-value">{{currPackage.DISPDATE+\' \'+currPackage.DISPTIME}}</span> </div> <div class="block package-block order-info flex flex-vcenter" ng-if="currPackage.DELAY_REASON"> <span class="l-title">延期原因</span> <span class="l-value">{{currPackage.DELAY_REASON}}</span> </div> <div class="block package-block order-info flex flex-vcenter" ng-if="currPackage.OLDDISPTIME"> <span class="l-title">延期前</span> <span class="l-value">{{currPackage.DISPDATE+\' \'+currPackage.OLDDISPTIME}}</span> </div> </section> <h3 class="title package-title order-info flex flex-vcenter">商品详情</h3> <section class="section package-section order-info" ng-repeat="detail in currPackage.ORDERDTLS"> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">{{detail.MEALNAME}}</span> <span class="l-value" style="text-align: right">{{detail.MEALCOUNT}}份</span> </div> </section> <h3 class="title package-title order-info flex flex-vcenter">客服备注</h3> <section class="section package-section contact-info"> <div class="block package-block order-info flex flex-vcenter"> xxx </div> </section> <div class="wrapper center-wrapper package-center-wrappe call"> <!--<a class="button packageDetail-button call" ng-href="{{\'tel:\'+currPackage.RECEIVERMOBILE}}">拨打电话</a>--> <a class="button packageDetail-button call" ng-click="selectDial(currPackage)">拨打电话</a> </div> </div>'),a.put("views/postpone_reason.html",'<div style="overflow: hidden"> <div class="reject_left"> <lebal>请选择延期理由:</lebal> <ul class="list"> <li class="item" ng-repeat="reason in reasons" ng-bind="reason.REASON" ng-click="choiseReason($event,reason.REASON);closeThisDialog()"></li> </ul> <!--<select ng-model="reject_reason" value="1">--> <!--<option value="1">{{config.reject_reason[0]}}</option>--> <!--<option value="2">{{config.reject_reason[1]}}</option>--> <!--<option value="3">{{config.reject_reason[2]}}</option>--> <!--</select>--> </div> <!--<div class="reject_right">--> <!--<button class="btn_delivery2 blue hasRadius ngdialog-button-primary" ng-click="delivery_reject() ; closeThisDialog()">确&nbsp;&nbsp;定</button> <br/>--> <!--</div>--> <label class="font_red">{{reject_warning}}</label> </div>')}]),angular.module("deliveryUiApp").run(["$templateCache",function(a){a.put("views/DeliveryList.tpl.html",'<style>.nav-btn .img{\n    height: 20px;\n    width: auto;\n    display: block;\n    margin: 0 auto;\n  }\n\n  .img.grabOrder {\n    height: 23px;\n    -webkit-transform: translateY(3px);\n    -moz-transform: translateY(3px);\n    -ms-transform: translateY(3px);\n    -o-transform: translateY(3px);\n    transform: translateY(3px);\n  }\n\n  .nav-btn span{\n    font-size: 12px;\n  }\n\n  .nav-btn{\n    -webkit-box-flex: 0.2;\n    -webkit-flex: 0.2;\n    flex: 0.2;\n  }\n\n  .nav-btn:nth-child(3) .img{\n    height: 40px;\n    margin-top: -20px;\n    border: 2px solid #ffffff;\n    -webkit-border-radius: 50%;\n    -moz-border-radius: 50%;\n    border-radius: 50%;\n  }</style> <ion-header-bar bak_class="bar-positive"> </ion-header-bar> <header> <div class="searchDiv flex flex-vcenter flex-hSbetween"> <div class="Delivery_menu" ng-click="openNavigation()"><i class="fa fa-bars fa-2x"></i></div> <div class="div1"> <input type="search" class="hasRadius" ng-model="searchContent" id="searchContent" placeholder="请输入取餐人姓名或地址或电话"> </div> <div class="div2"> <button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-class="{active : isSearch}" ng-click="search(searchContent)">搜</button> <button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-click="scan()">扫</button> </div> </div> <div class="div0" id="position_memo" style="display: none">未配送</div> </header> <when-scrolled ng-show="!showPackageDetial" config="scrollConfig" is-search="isSearch" status="status" curr-package="currPackage" show-package-detial="showPackageDetial" curr-package-detial="currPackageDetial"></when-scrolled> <div ng-include="\'views/packageDetail.tpl.html\'" ng-if="showPackageDetial"></div> <time-picker if="openTimePicker" timepickerresult="1" style="display: none"></time-picker> <!--<footer class="d-f" ng-if="showPackageDetial"><a ng-click="bindBackButtonAction()" class="btn hasRadius brown" style="display: block;float: right">返回</a></footer>--> <footer class="d-f flex flex-vcenter flex-hSaround" ng-if="!showPackageDetial"> <div class="nav-btn" ng-click="deliverFinsh()"> <img class="img" ng-if="tabPage == \'deliverFinsh\'" src="img/yipeisong@2x.png"> <img class="img" ng-if="tabPage != \'deliverFinsh\'" src="img/yipeisong-icon@2x.png"> <span ng-style="{color : tabPage == \'deliverFinsh\'?\'#00aef1\':\'\'}">已配送</span> </div> <div class="nav-btn" ng-click="deliverUndisp()"> <img class="img grabOrder" ng-if="tabPage == \'deliverUndisp\'" src="img/qiangdan-icon--.@2x.png"> <img class="img grabOrder" ng-if="tabPage != \'deliverUndisp\'" src="img/qiangdan-icon-KB@2x.png"> <span ng-style="{color : tabPage == \'deliverUndisp\'?\'#00aef1\':\'\'}">抢单</span> </div> <div class="nav-btn" ng-click="deliver()"> <img class="img" ng-if="tabPage == \'deliver\'" src="img/weipeisong--icon@2x.png"> <img class="img" ng-if="tabPage != \'deliver\'" src="img/weipeisong--icon@2x.png"> <span ng-style="{color : tabPage == \'deliver\'?\'#00aef1\':\'\'}">未配送</span> </div> <div class="nav-btn" ng-click="deliverException()"> <img class="img" ng-if="tabPage == \'deliverException\'" src="img/yiquxiao-icon@2x.png"> <img class="img" ng-if="tabPage != \'deliverException\'" src="img/yiquxiao-icon@2x_2.png"> <span ng-style="{color : tabPage == \'deliverException\'?\'#00aef1\':\'\'}">已取消</span> </div> <div class="nav-btn" ng-click="deliverExit()"> <img class="img" src="img/tuchu-icon@2x.png"> <span>退出登录</span> </div> <!--<a ng-href="#/position/userLocation/-1">--> <!--<button class="btn yellow hasRadius ngdialog-button-primary">位置</button>--> <!--</a>--> <!--<button class="btn blue hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliverFinsh\'}" ng-click="deliverFinsh()">已配</button>--> <!--<button class="btn green hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliver\'}" ng-click="deliver()">待配</button>--> <!--<button class="btn brown hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliverUndisp\'}" ng-click="deliverUndisp()">抢单</button>--> <!--<button class="btn orange hasRadius ngdialog-button-primary" ng-class="{active : tabPage == \'deliverException\'}" ng-click="deliverException()">已取消</button>--> <!--<button class="btn gray hasRadius ngdialog-button-primary" ng-click="deliverExit()">退出</button>--> </footer>'),a.put("views/LoginRegister.tpl.html",'<div class="login-reg"> <div class="login_reg_tab"> <p class="login_show" id="login_title" ng-click="vm.flag=false">{{vm.login_title}}</p> <p class="clear"></p> </div> <div class="login" ng-show="!vm.flag"> <div class="main"> <form id="loginform" name="loginform" ng-submit="login($event)" novalidate> <div class="div1"> <input type="text" name="username" id="username" placeholder="请输入您的用户名" ng-model="vm.username" required> </div> <div class="div2"> <input type="password" name="password" id="password" placeholder="请输入您的密码" required ng-model="vm.password"> </div> </form> <div class="click_wrapper" ng-click="vm.isRemenberPassword = !vm.isRemenberPassword"><i class="fa fa-circle fa-2x" ng-class="{active : vm.isRemenberPassword}"></i><input id="remenber_password" type="checkbox" ng-model="vm.isRemenberPassword"><label for="">记住密码</label></div> <div class="click_wrapper" ng-click="vm.isRemenberUserName = !vm.isRemenberUserName"><i class="fa fa-circle fa-2x" ng-class="{active : vm.isRemenberUserName}"></i><input id="remenber_username" type="checkbox" ng-model="vm.isRemenberUserName"><label for="">记住用户名</label></div> <input form="loginform" type="submit" id="login_button" value="登&nbsp;&nbsp;&nbsp;录"> <button id="change_button" ng-click="changeServer()">切&nbsp;&nbsp;&nbsp;换</button> <div class="switch server_type"> <!--<div class="groove switch-groove server_type" ng-click="switchServer()" ng-style="{\'background-color\' : isOfficeService?\'white\':\'gray\'}">--> <!--<i class="guillotine switch-guillotine server_type fa fa-circle fa-3x" ng-class="{open : isOfficeService,close : !isOfficeService}"></i>--> <!--</div>--> <label class="toggle toggle-balanced" style="float: right" ng-click="switchServer()" ng-swipe-left="switchServer(false)" ng-swipe-right="switchServer(true)"> <input type="checkbox" ng-model="isOfficeService"> <div class="track"> <div class="handle"></div> </div> </label> <span class="label server_type" ng-if="!isOfficeService">正式坏境－关</span> <span class="label server_type" ng-if="isOfficeService">正式坏境－开</span> </div> <div class="delivery_version">版本号:{{version}}</div> </div> </div> </div>'),
a.put("views/Position.tpl.html",'<div class="position_container" id="position_container" ng-if="!isRealPhone"> <footer class="d-f"><a href="javascript:;" ng-click="returnBack($event)" class="btn hasRadius blue" style="display: block;float: right">返回</a></footer> <iframe ng-src="{{templateUrl}}" style="width:100%;height:calc(100% - 52px);border:none" frameborder="0"> </div>'),a.put("views/changePassword.tpl.html",'<div class="login-userInterface"><!--login-reg --> <header class="changePassword leftTab">修改密码</header> <div class="transparent" onclick="window.history.back()" id="back"></div> <!--\r\n  <div class="login_reg_tab">\r\n    <p class="login_show" id="login_title" ng-click="vm.flag=false">修改密码</p>\r\n\r\n    <p class="clear"></p>\r\n  </div>--> <div class="login" ng-show="!vm.flag"> <div class="main"> <form id="loginform" name="loginform" ng-submit="changePwd($event)" novalidate> <div class="div1"> <img src="img/user.png" alt=""> <input show="!vm.username" type="text" name="oldpassword" id="oldpassword" placeholder="请输入用户名" ng-model="vm.username" required> </div> <div class="div3"> <img src="img/lock.png" alt=""> <input type="password" name="oldpassword" id="oldpassword" placeholder="请输入旧密码" ng-model="vm.oldPassword" required> </div> <div class="div3"> <img src="img/lock.png" alt=""> <input type="password" name="password" id="password" placeholder="请输入新密码" required ng-model="vm.newPassword"> </div> <div class="div2"> <img src="img/lock-sure.png" alt=""> <input type="password" name="repassword" id="repassword" placeholder="请确认新密码" required ng-model="vm.reNewPassword"> </div> </form> <div class="wrapper input-wrapper changePassword"> <input type="submit" id="modify_password" form="loginform" value="确认修改" class="btn blue"> <!--<input form="loginform" type="submit" id="modify_password" value="保存"/>\r\n        <input form="loginform" onclick="window.history.back()" type="reset" id="back" value="返回"/>--> </div> </div> </div> </div>'),a.put("views/classifyList/backList.tpl.html",'<section class="d-m-info un delivery_list" ng-if="status==\'BACK\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li> <text class="text_hint">送餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">送餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}" class="telephone">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1+\'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint" ng-if="delivery.REJECT_REASON != 0">拒签原因：</text> <span type="text" ng-if="delivery.REJECT_REASON != 0" ng-bind="config.reject_reason_no_white_space[delivery.REJECT_REASON - 1]"></span> </li> <li> <text class="text_hint">地&nbsp;&nbsp;&nbsp;&nbsp;址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp; {{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> </ul> <div class="d-m-i-s" ng-show="delivery.DISPSTATUS==\'BACK\' && !showPackageDetial"> <!--<div class="div1">--> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> <!--<a ng-href="#/position/{{status}}_{{isSearch}}/{{delivery.ID}}">--> <!--<button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-click="baiduMapButton($event)">--> <!--地&nbsp;&nbsp;图--> <!--</button>--> <!--</a>--> <!--</div>--> <!--<div class="div2">--> <!--<button class="btn_delivery green hasRadius ngdialog-button-primary" ng-click="gaporders($event,delivery.ID)">--> <!--我&nbsp;来&nbsp;送--> <!--</button>--> <!--</div>--> </div> </section>'),a.put("views/classifyList/complateList.tpl.html",'<section class="d-m-info f delivery_list" ng-if="status==\'COMPLETE\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li> <text class="text_hint">送餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">送餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}" class="telephone">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1+ \'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint">送餐地址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp;{{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> <li> <text class="text_hint">配送时间：</text> <span type="text" class="delivery_dispdate" ng-bind="delivery.RECEIVEDTIME"></span> </li>  </ul> <div class="d-m-i-s" ng-show="!showPackageDetial"> <!--<div class="div2">--> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> <!--</div>--> <!--<a ng-href="#/position/{{status}}_{{isSearch}}/{{delivery.ID}}">--> <!--<button class="btn_delivery blue hasRadius ngdialog-button-primary"  ng-click="baiduMapButton($event)">--> <!--地&nbsp;&nbsp;图--> <!--</button>--> <!--</a>--> </div> </section>'),a.put("views/classifyList/distributedList.tpl.html",'<section class="d-m-info delivery_list" ng-if="status==\'DISTRIBUTED\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li ng-class="{over_time : delivery.URGENCY == \'LATED\',warnning_time : delivery.URGENCY == \'URGENT\'}"> <text class="text_hint">取餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">取餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1+ \'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint">取餐地址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp; {{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> </ul> <div class="d-m-i-s" ng-if="delivery.DISPSTATUS == \'DISPATCHING\'  && !showPackageDetial"> <div class="nav-btn right" ng-click="exception_reject($event,identyfy,delivery.ID)"> <img class="img2" src="img/icon_juqian@2x.png"> <span>拒签</span> </div> <div class="nav-btn right" ng-click="exception_delay($event,identyfy,delivery.ID,delivery)"> <img class="img2" src="img/yanqi-icon@2x.png"> <span>延期</span> </div> <div class="nav-btn right" ng-click="ideatify($event,identyfy,delivery.ID)"> <img class="img2" src="img/quhuo@2x.png"> <span>确认</span> </div> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> </div> <div class="d-m-i-s" ng-if="(delivery.DISPSTATUS == \'INITIAL\' || delivery.DISPSTATUS == \'DISTRIBUTED\' ) && !showPackageDetial"> <div class="nav-btn right" ng-click="claimGoods($event,identyfy,delivery.ID)"> <img class="img2" src="img/shouhuo--icon@2x.png"> <span>取货</span> </div> </div> </section>'),a.put("views/classifyList/initialList.tpl.html",'<section class="d-m-info un delivery_list" ng-if="status==\'INITIAL\'"> <div class="{{delivery._dispateClass}}">{{delivery._dispateText}}</div> <ul> <li> <text class="text_hint">送餐时间：</text> <!--<div class="fa fa-clock-o"></div>--> <span type="text" class="delivery_dispdate2" ng-bind="delivery.DISPDATE+\' \'+delivery.DISPTIME"></span> </li> <li class="half_show"> <text class="text_hint">送餐人：</text> <span type="text" ng-bind="delivery.RECEIVERNAME"></span> </li> <li class="half_show"> <text class="text_hint">电话：</text> <a href="tel:{{delivery.RECEIVERMOBILE}}" class="telephone">{{delivery.RECEIVERMOBILE}}</a> </li> <li> <text class="text_hint">商品份数：</text> <span type="text" ng-bind="delivery.PRODUCTCOUNT>0?delivery.PRODUCTCOUNT:1 + \'份\'"></span> </li> <li> <text class="text_hint">订单号：</text> <span type="text" ng-bind="delivery.ID"></span> </li> <li> <text class="text_hint">送餐地址：</text> <span type="text">{{delivery.COUNTYNAME?delivery.COUNTYNAME+\' \':\'\'}}{{delivery.ADDRESS}}</span> <!--<span type="text">{{delivery.AREANAME}}&nbsp; {{delivery.BUILDINGNAME}}&nbsp; {{delivery.ADDRESS}}</span>--> </li> </ul> <div class="d-m-i-s" ng-show="delivery.DISPSTATUS==\'INITIAL\'  && !showPackageDetial"> <div class="nav-btn right" ng-click="path($event,\'/position/{{status}}_{{isSearch}}/{{delivery.ID}}\')"> <img class="img2" src="img/ditu_2x.png"> <span>地图</span> </div> <!--<a ng-href="#/position/{{status}}_{{isSearch}}/{{delivery.ID}}">--> <!--<button class="btn_delivery blue hasRadius ngdialog-button-primary" ng-click="baiduMapButton($event)">--> <!--地&nbsp;&nbsp;图--> <!--</button>--> <!--</a>--> <div class="nav-btn right" ng-click="gaporders($event,delivery.ID)"> <img class="img2" src="img/qiangdan@2x.png"> <span>抢单</span> </div> <!--<button class="btn_delivery green hasRadius ngdialog-button-primary" ng-click="gaporders($event,delivery.ID)">--> <!--抢单--> <!--</button>--> </div> </section>'),a.put("views/dialDialog.tpl.html",'<style>.dial-title{\n    font-size: 14px;\n    margin-top:-.4em;\n    text-align: center;\n  }\n  .dial-list{\n    margin-top:1em;\n  }\n  .dial-list > .dial-item{\n    display: block;\n    padding: 8px 12px;\n    text-align: center;\n  }\n  .dial-list > .dial-item:active{\n    background-color: rgba(0,0,0,.05);\n  }\n  .dial-list > .dial-item:not(:last-child){\n    border-bottom: 1px solid #e0e0e0;\n  }\n  .dial-buttons{\n    -webkit-justify-content: center;\n    justify-content: center;\n  }</style> <div class="ngdialog-message"> <h4 class="dial-title">请选择拨打对象</h4> <div class="dial-list"> <a ng-repeat="item in ngDialogData.list" ng-href="{{\'tel:\'+item.tel}}" class="dial-item"> {{item.name}}: {{item.tel}} </a> </div> </div> <div class="ngdialog-buttons flex dial-buttons"> <button type="button" id="alertModel-buttons" class="ngdialog-button" ng-click="confirm()"> {{ngDialogData.buttonText||\'取消\'}} </button> </div>'),a.put("views/directives/DeliveryList.tpl.html",'<div id="d-m" class="d-m"> <!--<div class="d-m" style="height: 100%;overflow: scroll" drag-fresh>--> <!-- 已配送 --> <div class="d-m" ng-show="status==\'COMPLETE\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/complateList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListFinsh | orderBy:DISPTIME:false" ng-if="!isSearch && DeliveryListFinsh.length"></div> <div ng-include="\'views/classifyList/complateList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPTIME:false" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListFinsh.length == 0 && !hasPage">“暂时没有配送成功状态的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">“没有搜索到配送成功状态的配送单”</div> <ion-infinite-scroll ng-if="hasPage && status==\'COMPLETE\' && !isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content> </div> <!-- 待配送 --> <div class="d-m" ng-show="status==\'DISTRIBUTED\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/distributedList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListDisp | orderBy:DISPTIME:false" ng-if="!isSearch && DeliveryListDisp.length"></div> <div ng-include="\'views/classifyList/distributedList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPTIME:false" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListDisp.length == 0 && !hasPage">“暂时没有等待配送状态的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">”没有搜索到等待配送状态的配送单“</div> <ion-infinite-scroll ng-if="hasPage && status==\'DISTRIBUTED\'&&!isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content></div> <!-- 抢单 --> <div class="d-m" ng-show="status==\'INITIAL\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/initialList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListUnDisp | orderBy:DISPDATE:true" ng-if="!isSearch && DeliveryListUnDisp.length"></div> <div ng-include="\'views/classifyList/initialList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPDATE:true" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListUnDisp.length == 0 && !hasPage">“暂时没有可以抢单的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">”没有搜索到可以抢单的配送单“</div> <ion-infinite-scroll ng-if="hasPage && status==\'INITIAL\' && !isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content></div> <!-- 异常数据 --> <div class="d-m" ng-show="status==\'BACK\'"> <ion-content class="has-footer has-header"> <ion-refresher on-refresh="doRefresh()" pulling-text="下拉刷新!!" refreshing-text="刷新中..." refreshing-icon="ion-loading-b"></ion-refresher> <div ng-include="\'views/classifyList/backList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListException | orderBy:DISPDATE:true" ng-if="!isSearch && DeliveryListException.length"></div> <div ng-include="\'views/classifyList/backList.tpl.html\'" ng-click="showPackageDetialFunc(delivery)" ng-repeat="delivery in DeliveryListSearched | orderBy:DISPDATE:true" ng-if="isSearch && DeliveryListSearched.length"></div> <div class="no_content_hint no_content_hint_complate" ng-if="!isSearch && DeliveryListException.length == 0 && !hasPage">“暂时没有无法配送或者被取消状态的配送单”</div> <div class="no_content_hint no_content_hint_complate" ng-if="isSearch && DeliveryListSearched.length == 0 && searchTime">”没有搜索到无法配送或者被取消状态的配送单“</div> <ion-infinite-scroll ng-if="hasPage && status==\'BACK\'&&!isSearch" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll> </ion-content></div> </div>'),a.put("views/directives/dragFresh.html",'<div class="m-dragFresh-rotate" ng-show="rotateUnit.show" ng-style="{ \'-webkit-transform\' : \'translate(0px,{{rotateUnit.translate}}px) rotate({{rotateUnit.rotate}}deg)\' }"> <img src="images/loading.3a19d385.gif"> </div>'),a.put("views/login.html",'<div class="page lg-page"> <div class="lg-banner"> </div> </div>'),a.put("views/login.tpl.html",'<div class="login-userInterface"> <header class="title-name">登录</header> <div class="brand"> <img ng-if="vm.login_title.indexOf(\'原麦\')>0" src="img/withWheat.png" alt="" class="b-background"> <img ng-if="vm.login_title.indexOf(\'JoySeed\')>0" src="img/joyseed-bg-img.png" alt="" class="b-background"> <div class="brand-center"> <img ng-if="vm.login_title.indexOf(\'原麦\')>0" src="img/wheat-logo.png" alt="" class="wheat-logo"> <img ng-if="vm.login_title.indexOf(\'JoySeed\')>0" src="img/joyseed-logo.png" alt="" class="wheat-logo"> <br> <span class="brand-name">{{vm.login_title}}</span> </div> </div> <div class="main-body"> <div class="entry"> <form id="loginform" name="loginform" ng-submit="login($event)" novalidate> <div class="phoneNum"> <img src="img/mobilePhone.png" alt=""> <input type="text" name="username" id="username" placeholder="请输入您的用户名" ng-model="vm.username" required> </div> <div class="password"> <img src="img/lock.png" alt=""> <input type="password" name="password" id="password" placeholder="请输入您的密码" ng-model="vm.password" required> </div> </form> <div class="modify"><a href="#/changePassword">修改密码</a></div> </div> <input type="submit" class="btn blue" id="login_button" form="loginform" value="登录"> <button class="btn white" id="change_button" ng-click="changeServer()">切换</button> <div class="switch server_type"> <label class="toggle toggle-balanced" style="float: right" ng-click="switchServer()" ng-swipe-left="switchServer(false)" ng-swipe-right="switchServer(true)"> <input type="checkbox" ng-model="isOfficeService"> <div class="track"> <div class="handle"></div> </div> </label> <span class="label server_type" ng-if="!isOfficeService">正式环境－关</span> <span class="label server_type" ng-if="isOfficeService">正式环境－开</span> </div> </div> </div>'),a.put("views/main.html",'<div class="header"> <ul class="nav nav-pills pull-right"> <li class="active"><a ng-href="#">Home</a></li> <li><a ng-href="#">About</a></li> <li><a ng-href="#">Contact</a></li> </ul> <h3 class="text-muted">DeliveryUI</h3> </div> <div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#">Splendid!</a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div> <div class="footer"> <p>♥ from the Yeoman team</p> </div>'),a.put("views/navigator.tpl.html",'<div class="usercenter"> <div class="u-u-info"> <dl> <dt><img class="usercenter_head" width="100" height="100"></dt> <dd>{{vm.userObj.MOBILE}}</dd> <dd> {{userInfo.username}} <!-- <button ng-click="rechargeBtnClickHandler($event)" class="mainBackgruond">充值</button>--> </dd> </dl> </div> <div class="clear"></div> <div class="u-fe-back"> <ul> <li class="u-feedback"><a ng-click="gotoDeliverUndisp()"><i class="fa fa-bars fa-lg mainColor space"></i>&nbsp;&nbsp;待配订单</a></li> <li class="u-feedback"><a ng-href="#/changePassword"><i class="fa fa-eraser fa-lg mainColor space"></i>&nbsp;&nbsp;修改密码</a></li> <li class="u-feedback" ng-if="isRNApp"><a ng-click="checkUpdate()"><i class="fa fa-cloud-download fa-lg mainColor space"></i>&nbsp;&nbsp;检查更新</a></li> <!--<li class="u-phone"><a href="tel:400-992-6632"><i class="fa fa-phone fa-lg mainColor space"></i>&nbsp;&nbsp;客服电话： 400-992-6632</a></li>--> <li class="u-feedback"><a ng-click="exitLogin()"><i class="fa fa-close fa-lg mainColor space"></i>&nbsp;&nbsp;退出登录</a></li> <!--<li class="u-issue"><a href="#">常见问题</a></li>--> <!--<li class="u-give"><a ng-click="gotoReward()"><i class="fa fa-money  fa-lg mainColor space"></i>打赏</a></li>--> <!-- <li class="u-give"><a ng-click="gotoCoupon()"><i class="fa fa-money  fa-lg mainColor space"></i>红包</a></li>--> </ul> </div> </div>'),a.put("views/packageDetail.tpl.html",'<style>.package-wrapper{\n    height: 100%;\n    width: 100%;\n    position: fixed;\n    top: 0;\n    overflow-x:hidden;\n    overflow-y: auto;\n    z-index: 1000;\n    background: white;\n  }\n\n  .title.package-title.order-info{\n    height: 45px;\n    font-size: 16px;\n    background: #f0f0f0;\n  }\n\n  .block.package-block{\n    padding: 10px 15px;\n    color: #666;\n  }\n\n  .l-title{\n    -webkit-box-flex: 0.25;\n    -webkit-flex: 0.25;\n    flex: 0.25;\n  }\n\n  .l-value{\n    -webkit-box-flex: 0.75;\n    -webkit-flex: 0.75;\n    flex: 0.75;\n  }\n\n  .package-center-wrappe{\n    padding-left: 15px;\n    padding-right: 15px;\n  }\n\n  .button.packageDetail-button{\n    width: 100%;\n    height: 50px;\n    line-height: 50px;\n    border:0;\n  }\n  .back-arrow-left{\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    border-style: solid;\n    border-color: #bbb transparent transparent #bbb;\n    border-width: 2px;\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }</style> <div class="wrapper package-wrapper"> <h3 class="title package-title order-info flex flex-vcenter" ng-click="back();"> <span class="back-arrow-left"></span> 订单信息 </h3> <section class="section package-section order-info"> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">订单号</span> <span class="l-value">{{currPackage.ID}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">配送状态</span> <span class="l-value">{{currPackage.__DISPSTATUS__Option__}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">收货人</span> <span class="l-value">{{currPackage.RECEIVERNAME}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">收货地址</span> <span class="l-value">{{currPackage.COUNTYNAME?currPackage.COUNTYNAME+\' \':\'\'}}{{currPackage.ADDRESS}}</span> </div> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">收货人电话</span> <span class="l-value">{{currPackage.RECEIVERMOBILE}}</span> </div> <h3 class="title package-title order-info flex flex-vcenter">配送信息</h3> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">配送时间</span> <span class="l-value">{{currPackage.DISPDATE+\' \'+currPackage.DISPTIME}}</span> </div> <div class="block package-block order-info flex flex-vcenter" ng-if="currPackage.DELAY_REASON"> <span class="l-title">延期原因</span> <span class="l-value">{{currPackage.DELAY_REASON}}</span> </div> <div class="block package-block order-info flex flex-vcenter" ng-if="currPackage.OLDDISPTIME"> <span class="l-title">延期前</span> <span class="l-value">{{currPackage.DISPDATE+\' \'+currPackage.OLDDISPTIME}}</span> </div> </section> <h3 class="title package-title order-info flex flex-vcenter">商品详情</h3> <section class="section package-section order-info" ng-repeat="detail in currPackage.ORDERDTLS"> <div class="block package-block order-info flex flex-vcenter"> <span class="l-title">{{detail.MEALNAME}}</span> <span class="l-value" style="text-align: right">{{detail.MEALCOUNT}}份</span> </div> </section> <h3 class="title package-title order-info flex flex-vcenter">客服备注</h3> <section class="section package-section contact-info"> <div class="block package-block order-info flex flex-vcenter"> xxx </div> </section> <div class="wrapper center-wrapper package-center-wrappe call"> <!--<a class="button packageDetail-button call" ng-href="{{\'tel:\'+currPackage.RECEIVERMOBILE}}">拨打电话</a>--> <a class="button packageDetail-button call" ng-click="selectDial(currPackage)">拨打电话</a> </div> </div>'),a.put("views/postpone_reason.html",'<div style="overflow: hidden"> <div class="reject_left"> <lebal>请选择延期理由:</lebal> <ul class="list"> <li class="item" ng-repeat="reason in reasons" ng-bind="reason.REASON" ng-click="choiseReason($event,reason.REASON);closeThisDialog()"></li> </ul> <!--<select ng-model="reject_reason" value="1">--> <!--<option value="1">{{config.reject_reason[0]}}</option>--> <!--<option value="2">{{config.reject_reason[1]}}</option>--> <!--<option value="3">{{config.reject_reason[2]}}</option>--> <!--</select>--> </div> <!--<div class="reject_right">--> <!--<button class="btn_delivery2 blue hasRadius ngdialog-button-primary" ng-click="delivery_reject() ; closeThisDialog()">确&nbsp;&nbsp;定</button> <br/>--> <!--</div>--> <label class="font_red">{{reject_warning}}</label> </div>')}]);